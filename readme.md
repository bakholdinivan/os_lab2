# ๐ ะะฐะฑะพัะฐัะพัะฝะฐั ัะฐะฑะพัะฐ โ2 - ะกะพััะธัะพะฒะบะฐ ะัััะตัะฐ


---

## ๐ฏ ะงัะพ ะผั ะดะตะปะฐะตะผ?

ะะตะฐะปะธะทัะตะผ **ะฟะฐัะฐะปะปะตะปัะฝัั ัะพััะธัะพะฒะบั ะผะฐััะธะฒะฐ** ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะฐะปะณะพัะธัะผะฐ **Batcher's Odd-Even Merge Sort** (ัะตัะฝะพ-ะฝะตัะตัะฝะฐั ัะพััะธัะพะฒะบะฐ ัะปะธัะฝะธะตะผ ะัััะตัะฐ).

### ะัะพัััะผะธ ัะปะพะฒะฐะผะธ:

ะัะตะดััะฐะฒั, ััะพ ั ัะตะฑั ะตััั ะบััะฐ ัะธัะตะป, ะบะพัะพััะต ะฝัะถะฝะพ ะพััะพััะธัะพะฒะฐัั. ะะฑััะฝัะต ะฐะปะณะพัะธัะผั (ัะธะฟะฐ bubble sort ะธะปะธ merge sort) ะดะตะปะฐัั ััะพ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ - ััะฐะฒะฝะธะฒะฐัั ัะธัะปะฐ ะพะดะฝะพ ะทะฐ ะดััะณะธะผ.

**ะะปะณะพัะธัะผ ะัััะตัะฐ** - ััะพ ัะฟะตัะธะฐะปัะฝัะน ัะฟะพัะพะฑ ัะพััะธัะพะฒะบะธ, ะณะดะต ะผะฝะพะณะพ ััะฐะฒะฝะตะฝะธะน ะผะพะถะฝะพ ะดะตะปะฐัั **ะะะะะะะะะะะะ** (ะฟะฐัะฐะปะปะตะปัะฝะพ), ะธัะฟะพะปัะทัั ะฝะตัะบะพะปัะบะพ ะฟะพัะพะบะพะฒ (threads). ะญัะพ ะบะฐะบ ะตัะปะธ ะฑั ั ัะตะฑั ะฑัะปะพ ะฝะตัะบะพะปัะบะพ ะฟะพะผะพัะฝะธะบะพะฒ, ะบะฐะถะดัะน ะธะท ะบะพัะพััั ััะฐะฒะฝะธะฒะฐะตั ัะฒะพั ะฟะฐัั ัะธัะตะป ะฒ ะพะดะฝะพ ะธ ัะพ ะถะต ะฒัะตะผั.

---

## ๐ ะงัะพ ัะฐะบะพะต ะฐะปะณะพัะธัะผ ะัััะตัะฐ?

### ะััะพัะธั:

ะะปะณะพัะธัะผ ะธะทะพะฑัะตะป **ะะตะฝะฝะตั ะัััะตั** ะฒ **1968 ะณะพะดั**. ะญัะพ ะฑัะปะฐ ัะฟะพัะฐ, ะบะพะณะดะฐ ะฝะฐัะฐะปะธ ะฟะพัะฒะปััััั ะฟะตัะฒัะต ะฟะฐัะฐะปะปะตะปัะฝัะต ะบะพะผะฟัััะตัั, ะธ ะฝัะถะฝั ะฑัะปะธ ะฐะปะณะพัะธัะผั, ะบะพัะพััะต ะผะพะณัั ะธัะฟะพะปัะทะพะฒะฐัั ะผะฝะพะณะพ ะฟัะพัะตััะพัะพะฒ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ.

### ะะปะฐะฒะฝะฐั ะธะดะตั:

**ะกะพััะธัะพะฒะพัะฝะฐั ัะตัั** - ััะพ ะบะฐะบ ััะตะผะฐ ั ัะธะบัะธัะพะฒะฐะฝะฝัะผะธ ะฟัะพะฒะพะดะฐะผะธ ะธ ััะฐะฒะฝะธัะตะปัะผะธ:

```
         โโโโโโโ
  9 โโโโ โ  >  โ โโโ 8
         โ     โ
  8 โโโโ โ  <  โ โโโ 9
         โโโโโโโ
```

ะะฐะถะดัะน ะฑะปะพะบ ">" ััะฐะฒะฝะธะฒะฐะตั ะดะฒะฐ ัะธัะปะฐ ะธ ะฟัะพะฟััะบะฐะตั ะผะตะฝััะตะต ะฝะฐะฒะตัั, ะฑะพะปััะตะต ะฒะฝะธะท.

**ะะปััะตะฒะพะต ะพัะปะธัะธะต ะพั ะพะฑััะฝะพะน ัะพััะธัะพะฒะบะธ:**
- ะ ะพะฑััะฝะพะน ัะพััะธัะพะฒะบะต ัะตัะตะฝะธั ะทะฐะฒะธััั ะพั ะดะฐะฝะฝัั (ะตัะปะธ ััะพ ะฑะพะปััะต ัะพะณะพ, ัะพ...)
- ะ ัะพััะธัะพะฒะพัะฝะพะน ัะตัะธ ะัััะตัะฐ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ััะฐะฒะฝะตะฝะธะน **ะคะะะกะะะะะะะ** ะธ ะฝะต ะทะฐะฒะธัะธั ะพั ะดะฐะฝะฝัั!

ะญัะพ ะฝะฐะทัะฒะฐะตััั **oblivious sorting** (ะฝะตะพัะฒะตะดะพะผะปะตะฝะฝะฐั ัะพััะธัะพะฒะบะฐ).

---

## ๐๏ธ ะะฐะบ ัะฐะฑะพัะฐะตั ะฐะปะณะพัะธัะผ?

### ะัะธะฝัะธะฟ "ะะฐะทะดะตะปัะน ะธ ะฒะปะฐััะฒัะน" (Divide and Conquer):

```
ะจะฐะณ 1: ะะะะะะะฏะ
โโโโโโโโโโโโโโโ
ะััะพะดะฝัะน ะผะฐััะธะฒ: [9, 8, 7, 6, 5, 4, 3, 2]
                          โ
                    โโโโโโโดโโโโโโ
                    โผ           โผ
              [9,8,7,6]    [5,4,3,2]


ะจะฐะณ 2: ะกะะะขะะะฃะ (ัะตะบัััะธะฒะฝะพ)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ะกะพััะธััะตะผ ะบะฐะถะดัั ะฟะพะปะพะฒะธะฝั ะพัะดะตะปัะฝะพ:

    [9,8,7,6]  โ  [6,7,8,9]
    [5,4,3,2]  โ  [2,3,4,5]


ะจะฐะณ 3: ะกะะะะะ (Odd-Even Merge)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ะกะปะธะฒะฐะตะผ ะดะฒะต ะพััะพััะธัะพะฒะฐะฝะฝัะต ะฟะพะปะพะฒะธะฝั:

    [6,7,8,9] + [2,3,4,5]  โ  [2,3,4,5,6,7,8,9]
```

### ะะฐะณะธั ะฒ ัะปะธัะฝะธะธ!

ะะฑััะฝัะน **merge sort** ัะปะธะฒะฐะตั ัะฐะบ:
```
[6,7,8,9] ะธ [2,3,4,5]

ะกัะฐะฒะฝะธะฒะฐะตะผ 6 ะธ 2 โ ะฑะตัะตะผ 2
ะกัะฐะฒะฝะธะฒะฐะตะผ 6 ะธ 3 โ ะฑะตัะตะผ 3
ะกัะฐะฒะฝะธะฒะฐะตะผ 6 ะธ 4 โ ะฑะตัะตะผ 4
...
```
**ะัะพะฑะปะตะผะฐ:** ะะฐะถะดะพะต ััะฐะฒะฝะตะฝะธะต ะทะฐะฒะธัะธั ะพั ะฟัะตะดัะดััะตะณะพ! ะะตะปัะทั ะดะตะปะฐัั ะฟะฐัะฐะปะปะตะปัะฝะพ.

**ะัััะตั** ะดะตะปะฐะตั ะฟะพ-ะดััะณะพะผั:
```
ะฃัะพะฒะตะฝั 1: ะกัะฐะฒะฝะธะฒะฐะตะผ (6,2), (7,3), (8,4), (9,5) ะะะะะะะะะะะะ!
           ะะตะทัะปััะฐั: [2,6,3,7,4,8,5,9]

ะฃัะพะฒะตะฝั 2: ะกัะฐะฒะฝะธะฒะฐะตะผ (6,3), (7,4), (8,5) ะะะะะะะะะะะะ!
           ะะตะทัะปััะฐั: [2,3,6,4,7,5,8,9]

ะฃัะพะฒะตะฝั 3: ะกัะฐะฒะฝะธะฒะฐะตะผ (6,4), (7,5) ะะะะะะะะะะะะ!
           ะะตะทัะปััะฐั: [2,3,4,6,5,7,8,9]

ะฃัะพะฒะตะฝั 4: ะกัะฐะฒะฝะธะฒะฐะตะผ (6,5) ะะะะะะะะะะะะ!
           ะะตะทัะปััะฐั: [2,3,4,5,6,7,8,9] โ
```

**ะัะตะธะผััะตััะฒะพ:** ะัะต ััะฐะฒะฝะตะฝะธั ะฝะฐ ะบะฐะถะดะพะผ ััะพะฒะฝะต **ะฝะตะทะฐะฒะธัะธะผั** - ะผะพะถะฝะพ ะดะตะปะฐัั ะฟะฐัะฐะปะปะตะปัะฝะพ!

---

## ๐ง ะงัะพ ัะฐะบะพะต Padding ะธ ะทะฐัะตะผ ะพะฝ ะฝัะถะตะฝ?

### ะัะพะฑะปะตะผะฐ:

ะะปะณะพัะธัะผ ะัััะตัะฐ ัะพะทะดะฐะฒะฐะปัั ะดะปั ัะฐะทะผะตัะพะฒ **n = 2^k** (ััะตะฟะตะฝะธ ะดะฒะพะนะบะธ):
- 2, 4, 8, 16, 32, 64, 128, ...

ะัะปะธ ั ะฝะฐั **9 ัะปะตะผะตะฝัะพะฒ** (ะฝะต ััะตะฟะตะฝั ะดะฒะพะนะบะธ), ััััะบัััะฐ ัะตัะธ "ะปะพะผะฐะตััั".

### ะะตัะตะฝะธะต - Padding:

**ะะพะฟะพะปะฝัะตะผ ะผะฐััะธะฒ ะดะพ ะฑะปะธะถะฐะนัะตะน ััะตะฟะตะฝะธ ะดะฒะพะนะบะธ ัะธะบัะธะฒะฝัะผะธ ัะปะตะผะตะฝัะฐะผะธ (sentinels).**

```
ะััะพะดะฝัะน ะผะฐััะธะฒ (9 ัะปะตะผะตะฝัะพะฒ):
[9, 8, 7, 6, 5, 4, 3, 2, 1]

ะะปะธะถะฐะนัะฐั ััะตะฟะตะฝั ะดะฒะพะนะบะธ: 16 (2^4)

ะะพัะปะต padding:
[9, 8, 7, 6, 5, 4, 3, 2, 1, โ, โ, โ, โ, โ, โ, โ]
                            โ
                    ะคะธะบัะธะฒะฝัะต ัะปะตะผะตะฝัั
                    (โ = INT_MAX)

ะะพัะปะต ัะพััะธัะพะฒะบะธ:
[1, 2, 3, 4, 5, 6, 7, 8, 9, โ, โ, โ, โ, โ, โ, โ]
 โโโโโโโโโโโโโโโโโโโโโโโโโโโ
 ะัะฒะพะดะธะผ ัะพะปัะบะพ ะฟะตัะฒัะต 9

Sentinel-ั "ะฒัะฟะปัะฒะฐัั" ะฒะฟัะฐะฒะพ, ั.ะบ. INT_MAX ะฑะพะปััะต ะปัะฑะพะณะพ ัะธัะปะฐ
```

### ะญัะพ ะบะพัััะปั?

**ะะะข!** ะญัะพ ััะฐะฝะดะฐััะฝะฐั ะฟัะฐะบัะธะบะฐ ะธะท ะฝะฐััะฝะพะน ะปะธัะตัะฐัััั.

ะฆะธัะฐัะฐ ะธะท ะบะฝะธะณะธ ะะพะฝะฐะปัะดะฐ ะะฝััะฐ (TAOCP, Vol. 3):
> "For other values of n, the usual practice is to extend the input to 2^โlogโ nโ elements by inserting dummy elements (sentinels) that are larger than all real elements."

---

## ๐งต ะกะธะฝััะพะฝะธะทะฐัะธั ะฟะพัะพะบะพะฒ

### 1. ะกะตะผะฐัะพั (Semaphore)

**ะัะพัััะผะธ ัะปะพะฒะฐะผะธ:** ะญัะพ ะบะฐะบ ัััะฝะธะบะตั ั ะพะณัะฐะฝะธัะตะฝะธะตะผ ะฝะฐ ะบะพะปะธัะตััะฒะพ ะปัะดะตะน.

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ       ะกะะะะคะะ (max_threads = 4)     โ
โ                                     โ
โ   ะกะฒะพะฑะพะดะฝัั ะผะตัั: [โ][โ][โ][โ]     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ะะพัะพะบ 1: sem_wait() โ ะัะพัะตะป! [โก][โ][โ][โ]
ะะพัะพะบ 2: sem_wait() โ ะัะพัะตะป! [โก][โก][โ][โ]
ะะพัะพะบ 3: sem_wait() โ ะัะพัะตะป! [โก][โก][โก][โ]
ะะพัะพะบ 4: sem_wait() โ ะัะพัะตะป! [โก][โก][โก][โก]
ะะพัะพะบ 5: sem_wait() โ ะะะะข!   (ะฝะตั ะผะตัั)
                       โธ๏ธ

ะะพัะพะบ 1: sem_post() โ ะัะฒะพะฑะพะดะธะป ะผะตััะพ! [โ][โก][โก][โก]
ะะพัะพะบ 5: ะะฐะทะฑะปะพะบะธัะพะฒะฐะปัั! ะัะพัะตะป! [โก][โก][โก][โก]
```

**ะ ะบะพะดะต:**
```c
sem_t sem;
sem_init(&sem, 0, max_threads);  // ะะฝะธัะธะฐะปะธะทะฐัะธั: max_threads ัะฒะพะฑะพะดะฝัั ะผะตัั

// ะะตัะตะด ัะพะทะดะฐะฝะธะตะผ ะฟะพัะพะบะฐ:
sem_wait(&sem);  // ะะฐัะฒะฐัะธัั ะผะตััะพ (ะตัะปะธ ะฝะตั - ะถะดะฐัั)

// ะ ะบะพะฝัะต ัะฐะฑะพัั ะฟะพัะพะบะฐ:
sem_post(&sem);  // ะัะฒะพะฑะพะดะธัั ะผะตััะพ
```

**ะะฐัะตะผ?**
ะะณัะฐะฝะธัะธะฒะฐะตะผ ัะธัะปะพ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ ัะฐะฑะพัะฐััะธั ะฟะพัะพะบะพะฒ, ััะพะฑั ะฝะต ะฟะตัะตะณััะทะธัั ัะธััะตะผั.

---

### 2. ะััะตะบั (Mutex)

**ะัะพัััะผะธ ัะปะพะฒะฐะผะธ:** ะญัะพ ะทะฐะผะพะบ ะฝะฐ ะดะฒะตัะธ. ะขะพะปัะบะพ ะพะดะธะฝ ัะตะปะพะฒะตะบ ะผะพะถะตั ะทะฐะนัะธ ะฒ ะบะพะผะฝะฐัั ะทะฐ ัะฐะท.

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ะะะะขะะงะะกะะะฏ ะกะะะฆะะฏ        โ
โ   (ะบะพะฝัะพะปั ะดะปั ะฒัะฒะพะดะฐ)      โ
โ                             โ
โ   printf("Thread %d\n");    โ
โ                             โ
โ   ๐ ะะฐัะธัะตะฝะพ ะผััะตะบัะพะผ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ะะพัะพะบ A: mutex_lock()   โ ะะฐัะฒะฐัะธะป ะทะฐะผะพะบ ๐โ๐
         printf("A")
         mutex_unlock() โ ะัะดะฐะป ะทะฐะผะพะบ ๐โ๐

ะะพัะพะบ B: mutex_lock()   โ ะะฐัะฒะฐัะธะป ะทะฐะผะพะบ ๐โ๐
         printf("B")
         mutex_unlock() โ ะัะดะฐะป ะทะฐะผะพะบ ๐โ๐
```

**ะะตะท ะผััะตะบัะฐ:**
```
ะะพัะพะบ A: printf("Thread A: swapped...\n");
ะะพัะพะบ B: printf("Thread B: swapped...\n");

ะัะฒะพะด:
Thread Thread A:B swap: swappedped.....
      โ ะฅะฐะพั! ะกััะพะบะธ ะฟะตัะตะผะตัะฐะปะธัั!
```

**ะก ะผััะตะบัะพะผ:**
```c
pthread_mutex_lock(&print_mutex);    // ะะฐัะฒะฐัะธัั ะทะฐะผะพะบ
printf("Thread A: swapped...\n");    // ะขะพะปัะบะพ ะพะดะธะฝ ะฟะพัะพะบ ะทะดะตัั!
pthread_mutex_unlock(&print_mutex);  // ะัะฒะพะฑะพะดะธัั ะทะฐะผะพะบ
```

---

### 3. ะะฐััะตัะฝะฐั ัะธะฝััะพะฝะธะทะฐัะธั (pthread_join)

**ะัะพัััะผะธ ัะปะพะฒะฐะผะธ:** ะะดะตะผ, ะฟะพะบะฐ ะะกะ ะทะฐะบะพะฝัะฐั, ะฟัะตะถะดะต ัะตะผ ะฟัะพะดะพะปะถะธัั.

```
ะฃัะพะฒะตะฝั 1: ะกะพะทะดะฐะปะธ 4 ะฟะพัะพะบะฐ
           [Thread-1] [Thread-2] [Thread-3] [Thread-4]
                โ          โ          โ          โ
                โผ          โผ          โผ          โผ
           ะะฐะฑะพัะฐัั... ะะฐะฑะพัะฐัั... ะะฐะฑะพัะฐัั... ะะฐะฑะพัะฐัั...

Main: pthread_join(Thread-1)  โธ๏ธ ะะดะตะผ
Main: pthread_join(Thread-2)  โธ๏ธ ะะดะตะผ
Main: pthread_join(Thread-3)  โธ๏ธ ะะดะตะผ
Main: pthread_join(Thread-4)  โธ๏ธ ะะดะตะผ

[ะัะต ะทะฐะฒะตััะธะปะธัั]

Main: ะขะตะฟะตัั ะผะพะถะตะผ ะฝะฐัะฐัั ะฃัะพะฒะตะฝั 2! โ
```

**ะ ะบะพะดะต:**
```c
// ะกะพะทะดะฐะปะธ ะฟะพัะพะบะธ
for (int i = 0; i < 4; i++) {
    pthread_create(&threads[i], NULL, compare_and_swap, ...);
}

// ะะะะฌะะ: ะถะดะตะผ ะทะฐะฒะตััะตะฝะธั ะะกะะฅ
for (int i = 0; i < 4; i++) {
    pthread_join(threads[i], NULL);  // ะะปะพะบะธััะตััั ะฟะพะบะฐ ะฟะพัะพะบ ะฝะต ะทะฐะฒะตััะธััั
}

// ะขะตะฟะตัั ะฒัะต ะฟะพัะพะบะธ ัะพัะฝะพ ะทะฐะฒะตััะธะปะธัั, ะผะพะถะฝะพ ะฟัะพะดะพะปะถะฐัั!
```

---

## ๐ป ะะพะผะฟะธะปััะธั ะธ ะทะฐะฟััะบ

### ะกะฑะพัะบะฐ:
```bash
make
```

### ะะฐะฟััะบ:
```bash
# ะคะพัะผะฐั: ./batcher_sort <max_threads> <ัะธัะปะฐ ะดะปั ัะพััะธัะพะฒะบะธ>
./batcher_sort 4 9 8 7 6 5 4 3 2 1
```

### ะขะตััั:
```bash
make test
```

### ะัะธััะบะฐ:
```bash
make clean
```

---

## ๐งช ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะัะธะผะตั 1: ะะฐะทะพะฒัะน ะทะฐะฟััะบ

```bash
$ ./batcher_sort 4 9 8 7 6 5 4 3 2 1

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   Batcher's Odd-Even Merge Sort (Parallel)    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Initial array: 9 8 7 6 5 4 3 2 1 

=== Starting Batcher's Odd-Even Merge Sort ===
Original size: 9, Padded to: 16, Max threads: 4

  Thread 140123456789120: swapped arr[0]=8 <-> arr[1]=9
  Thread 140123448396416: swapped arr[2]=6 <-> arr[3]=7
  ...

=== Sorting completed ===

Sorted array:  1 2 3 4 5 6 7 8 9 

โ Array is correctly sorted!

Time elapsed: 15 ms
Original elements: 9
Padded to: 16 (power of 2)
Max concurrent threads: 4
```

### ะัะธะผะตั 2: ะะดะธะฝ ะฟะพัะพะบ (ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ)

```bash
$ ./batcher_sort 1 5 4 3 2 1

# ะัะดะตั ะผะตะดะปะตะฝะฝะตะต, ั.ะบ. ะฒัะต ััะฐะฒะฝะตะฝะธั ะฒัะฟะพะปะฝััััั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ
```

### ะัะธะผะตั 3: ะะฝะพะณะพ ะฟะพัะพะบะพะฒ

```bash
$ ./batcher_sort 16 32 31 30 ... 1

# ะััััะตะต ะทะฐ ััะตั ะฟะฐัะฐะปะปะตะปะธะทะผะฐ
```

---

## ๐ ะกะปะพะถะฝะพััั ะฐะปะณะพัะธัะผะฐ

| ะฅะฐัะฐะบัะตัะธััะธะบะฐ | ะะฝะฐัะตะฝะธะต | ะะฑัััะฝะตะฝะธะต |
|----------------|----------|------------|
| **ะงะธัะปะพ ััะฐะฒะฝะตะฝะธะน** | O(n logยฒ n) | ะะพะปััะต, ัะตะผ ั ะพะฑััะฝะพะณะพ merge sort (O(n log n)) |
| **ะะปัะฑะธะฝะฐ ัะตัะธ** | O(logยฒ n) | ะะพะปะธัะตััะฒะพ "ััะพะฒะฝะตะน" ะฒ ัะพััะธัะพะฒะพัะฝะพะน ัะตัะธ |
| **ะะฐัะฐะปะปะตะปัะฝะพะต ะฒัะตะผั** | O(logยฒ n) | ะัะธ ะฝะตะพะณัะฐะฝะธัะตะฝะฝะพะผ ัะธัะปะต ะฟัะพัะตััะพัะพะฒ |

### ะะพัะตะผั ะัััะตั ะผะตะดะปะตะฝะฝะตะต ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ, ะฝะพ ะฑััััะตะต ะฟะฐัะฐะปะปะตะปัะฝะพ?

```
ะะฑััะฝัะน Merge Sort:
  ะะพัะปะตะดะพะฒะฐัะตะปัะฝะพ: 100 ััะฐะฒะฝะตะฝะธะน
  ะะฐัะฐะปะปะตะปัะฝะพ (4 ัะดัะฐ): ~50 ััะฐะฒะฝะตะฝะธะน (ััะบะพัะตะฝะธะต 2x)

Batcher Sort:
  ะะพัะปะตะดะพะฒะฐัะตะปัะฝะพ: 200 ััะฐะฒะฝะตะฝะธะน (ะผะตะดะปะตะฝะฝะตะต!)
  ะะฐัะฐะปะปะตะปัะฝะพ (4 ัะดัะฐ): ~20 ััะฐะฒะฝะตะฝะธะน (ััะบะพัะตะฝะธะต 10x!)
```

**ะัะฒะพะด:** ะัััะตั ะดะตะปะฐะตั ะฑะพะปััะต ััะฐะฒะฝะตะฝะธะน, ะฝะพ ะฟะพััะธ ะฒัะต ะพะฝะธ ะฟะฐัะฐะปะปะตะปัะฝัะต!

---

## ๐ ะะพะฝะธัะพัะธะฝะณ ะฟะพัะพะบะพะฒ

### Linux:

ะะพ ะฒัะตะผั ัะฐะฑะพัั ะฟัะพะณัะฐะผะผั ะพัะบัะพะนัะต ะดััะณะพะน ัะตัะผะธะฝะฐะป:

```bash
# ะะฐะนัะธ PID ะฟัะพัะตััะฐ
ps aux | grep batcher_sort

# ะะพัะผะพััะตัั ะฟะพัะพะบะธ
ps -eLf | grep batcher_sort

# ะะปะธ ัะตัะตะท top
top -H -p $(pgrep batcher_sort)
```

**ะั ัะฒะธะดะธัะต:**
```
USER   PID   TID   ... CMD
ivan   1234  1234  ... ./batcher_sort (main thread)
ivan   1234  1235  ... ./batcher_sort (worker thread 1)
ivan   1234  1236  ... ./batcher_sort (worker thread 2)
ivan   1234  1237  ... ./batcher_sort (worker thread 3)
ivan   1234  1238  ... ./batcher_sort (worker thread 4)
```

ะะฐะบัะธะผัะผ ะฟะพัะพะบะพะฒ = `max_threads` + 1 (ะณะปะฐะฒะฝัะน ะฟะพัะพะบ)

---


